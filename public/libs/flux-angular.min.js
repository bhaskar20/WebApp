!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return"λ"+t.map(function(t){return m["default"]["function"](t)||m["default"].object(t)?"#"+D()+"#":t}).join("λ")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var h=Object.getPrototypeOf(i);if(null===h)return;t=h,e=o,r=a,n=!0,s=h=void 0}},c=t("emmett"),l=i(c),f=t("./cursor"),d=i(f),p=t("./monkey"),y=t("./watcher"),v=i(y),g=t("./type"),m=i(g),b=t("./update"),_=i(b),w=t("./helpers"),k=n(w),j=k.arrayFrom,P=k.coercePath,x=k.deepFreeze,O=k.getIn,E=k.makeError,C=k.deepMerge,A=k.shallowClone,M=k.shallowMerge,D=k.uniqid,S={autoCommit:!0,asynchronous:!0,immutable:!0,lazyMonkeys:!0,persistent:!0,pure:!0,validate:null,validationBehavior:"rollback"},I=function(t){function e(t,r){var n=this;if(o(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),arguments.length<1&&(t={}),!m["default"].object(t)&&!m["default"].array(t))throw E("Baobab: invalid data.",{data:t});this.options=M({},S,r),this.options.persistent||(this.options.immutable=!1,this.options.pure=!1),this._identity="[object Baobab]",this._cursors={},this._future=null,this._transaction=[],this._affectedPathsIndex={},this._monkeys={},this._previousData=null,this._data=t,this.root=new d["default"](this,[],"λ"),delete this.root.release,this.options.immutable&&x(this._data);var i=function(t){n[t]=function(){var e=this.root[t].apply(this.root,arguments);return e instanceof d["default"]?this:e}};["apply","clone","concat","deepClone","deepMerge","exists","get","push","merge","pop","project","serialize","set","shift","splice","unset","unshift"].forEach(i),this._refreshMonkeys();var a=this.validate();if(a)throw Error("Baobab: invalid data.",{error:a})}return a(e,t),u(e,[{key:"_refreshMonkeys",value:function(t,e,r){var n=this,i=function u(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(t instanceof p.Monkey)return t.release(),void(0,_["default"])(n._monkeys,e,{type:"unset"},{immutable:!1,persistent:!1,pure:!1});if(m["default"].object(t))for(var r in t)u(t[r],e.concat(r))},o=[],a=function h(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(t instanceof p.MonkeyDefinition||t instanceof p.Monkey){var r=new p.Monkey(n,e,t instanceof p.Monkey?t.definition:t);return o.push(r),void(0,_["default"])(n._monkeys,e,{type:"set",value:r},{immutable:!1,persistent:!1,pure:!1})}if(m["default"].object(t))for(var i in t)h(t[i],e.concat(i))};if(arguments.length){var s=O(this._monkeys,e).data;s&&i(s,e),"unset"!==r&&(a(t,e),o.forEach(function(t){return t.checkRecursivity()}))}else a(this._data),o.forEach(function(t){return t.checkRecursivity()});return this}},{key:"validate",value:function r(t){var e=this.options,r=e.validate,n=e.validationBehavior;if("function"!=typeof r)return null;var i=r.call(this,this._previousData,this._data,t||[[]]);return i instanceof Error?("rollback"===n&&(this._data=this._previousData,this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data),this.emit("invalid",{error:i}),i):null}},{key:"select",value:function(t){if(t=t||[],arguments.length>1&&(t=j(arguments)),!m["default"].path(t))throw E("Baobab.select: invalid path.",{path:t});t=[].concat(t);var e=s(t),r=this._cursors[e];return r||(r=new d["default"](this,t,e),this._cursors[e]=r),this.emit("select",{path:t,cursor:r}),r}},{key:"update",value:function(t,e){var r=this;if(t=P(t),!m["default"].operationType(e.type))throw E('Baobab.update: unknown operation type "'+e.type+'".',{operation:e});var n=O(this._data,t),i=n.solvedPath,o=n.exists;if(!i)throw E("Baobab.update: could not solve the given path.",{path:i});var a=m["default"].monkeyPath(this._monkeys,i);if(a&&i.length>a.length)throw E("Baobab.update: attempting to update a read-only path.",{path:i});if("unset"!==e.type||o){var u=e;if(/merge/.test(e.type)){var h=O(this._monkeys,i).data;m["default"].object(h)&&(u=A(u),/deep/.test(u.type)?u.value=C({},h,u.value):u.value=M({},h,u.value))}this._transaction.length||(this._previousData=this._data);var c=(0,_["default"])(this._data,i,u,this.options),l=c.data,f=c.node;if(!("data"in c))return f;var d=i.concat("push"===e.type?f.length-1:[]),p=s(d);return this._data=l,this._affectedPathsIndex[p]=!0,this._transaction.push(M({},e,{path:d})),this._refreshMonkeys(f,i,e.type),this.emit("write",{path:d}),this.options.autoCommit?this.options.asynchronous?(this._future||(this._future=setTimeout(function(){return r.commit()},0)),f):(this.commit(),f):f}}},{key:"commit",value:function(){if(!this._transaction.length)return this;this._future&&(this._future=clearTimeout(this._future));var t=Object.keys(this._affectedPathsIndex).map(function(t){return"λ"!==t?t.split("λ").slice(1):[]}),e=this.validate(t);if(e)return this;var r=this._transaction,n=this._previousData;return this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this.emit("update",{paths:t,currentData:this._data,transaction:r,previousData:n}),this}},{key:"watch",value:function(t){return new v["default"](this,t)}},{key:"release",value:function(){var t=void 0;this.emit("release"),delete this.root,delete this._data,delete this._previousData,delete this._transaction,delete this._affectedPathsIndex,delete this._monkeys;for(t in this._cursors)this._cursors[t].release();delete this._cursors,this.kill()}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),e}(l["default"]);r["default"]=I,I.monkey=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];if(!e.length)throw new Error("Baobab.monkey: missing definition.");return 1===e.length&&"function"!=typeof e[0]?new p.MonkeyDefinition(e[0]):new p.MonkeyDefinition(e)},I.dynamicNode=I.monkey,I.Cursor=d["default"],I.MonkeyDefinition=p.MonkeyDefinition,I.Monkey=p.Monkey,I.type=m["default"],I.helpers=k,I.VERSION="2.3.0",e.exports=r["default"]},{"./cursor":2,"./helpers":3,"./monkey":4,"./type":5,"./update":6,"./watcher":7,emmett:8}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!e)throw(0,y.makeError)("Baobab.Cursor."+t+": "+("cannot use "+t+" on an unresolved dynamic path."),{path:e})}function s(t,e){v.prototype[t]=function(r,n){if(arguments.length>2)throw(0,y.makeError)("Baobab.Cursor."+t+": too many arguments.");if(1!==arguments.length||g[t]||(n=r,r=[]),r=(0,y.coercePath)(r),!p["default"].path(r))throw(0,y.makeError)("Baobab.Cursor."+t+": invalid path.",{path:r});if(e&&!e(n))throw(0,y.makeError)("Baobab.Cursor."+t+": invalid value.",{path:r,value:n});if(!this.solvedPath)throw(0,y.makeError)("Baobab.Cursor."+t+": the dynamic path of the cursor cannot be solved.",{path:this.path});var i=this.solvedPath.concat(r);return this.tree.update(i,{type:t,value:n})}}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var h=Object.getPrototypeOf(i);if(null===h)return;t=h,e=o,r=a,n=!0,s=h=void 0}},c=t("emmett"),l=n(c),f=t("./monkey"),d=t("./type"),p=n(d),y=t("./helpers"),v=function(t){function e(t,r,n){var o=this;i(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),r=r||[],this._identity="[object Cursor]",this._archive=null,this.tree=t,this.path=r,this.hash=n,this.state={killed:!1,recording:!1,undoing:!1},this._dynamicPath=p["default"].dynamicPath(this.path),this._monkeyPath=p["default"].monkeyPath(this.tree._monkeys,this.path),this._dynamicPath?this.solvedPath=(0,y.getIn)(this.tree._data,this.path).solvedPath:this.solvedPath=this.path,this._writeHandler=function(t){var e=t.data;!o.state.killed&&(0,y.solveUpdate)([e.path],o._getComparedPaths())&&(o.solvedPath=(0,y.getIn)(o.tree._data,o.path).solvedPath)};var a=function(t){var e=o,r=Object.defineProperties({},{previousData:{get:function(){return(0,y.getIn)(t,e.solvedPath).data},configurable:!0,enumerable:!0},currentData:{get:function(){return e.get()},configurable:!0,enumerable:!0}});return o.state.recording&&!o.state.undoing&&o.archive.add(r.previousData),o.state.undoing=!1,o.emit("update",r)};this._updateHandler=function(t){if(!o.state.killed){var e=t.data,r=e.paths,n=e.previousData,i=a.bind(o,n),s=o._getComparedPaths();return(0,y.solveUpdate)(r,s)?i():void 0}};var s=!1;this._lazyBind=function(){return s?void 0:(s=!0,o._dynamicPath&&o.tree.on("write",o._writeHandler),o.tree.on("update",o._updateHandler))},this._dynamicPath?this._lazyBind():(this.on=(0,y.before)(this._lazyBind,this.on.bind(this)),this.once=(0,y.before)(this._lazyBind,this.once.bind(this)))}return o(e,t),u(e,[{key:"_getComparedPaths",value:function(){var t=this._monkeyPath?(0,y.getIn)(this.tree._monkeys,this._monkeyPath).data.relatedPaths():[];return[this.solvedPath].concat(t)}},{key:"isRoot",value:function(){return!this.path.length}},{key:"isLeaf",value:function(){return p["default"].primitive(this._get().data)}},{key:"isBranch",value:function(){return!this.isRoot()&&!this.isLeaf()}},{key:"root",value:function(){return this.tree.select()}},{key:"select",value:function(t){return arguments.length>1&&(t=(0,y.arrayFrom)(arguments)),this.tree.select(this.path.concat(t))}},{key:"up",value:function(){return this.isRoot()?null:this.tree.select(this.path.slice(0,-1))}},{key:"down",value:function(){if(a("down",this.solvedPath),!(this._get().data instanceof Array))throw Error("Baobab.Cursor.down: cannot go down on a non-list type.");return this.tree.select(this.solvedPath.concat(0))}},{key:"left",value:function(){a("left",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.left: cannot go left on a non-list type.");return t?this.tree.select(this.solvedPath.slice(0,-1).concat(t-1)):null}},{key:"right",value:function(){a("right",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.right: cannot go right on a non-list type.");return t+1===this.up()._get().data.length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(t+1))}},{key:"leftmost",value:function(){a("leftmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))}},{key:"rightmost",value:function(){a("rightmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.rightmost: cannot go right on a non-list type.");var e=this.up()._get().data;return this.tree.select(this.solvedPath.slice(0,-1).concat(e.length-1))}},{key:"map",value:function(t,e){a("map",this.solvedPath);var r=this._get().data,n=arguments.length;if(!p["default"].array(r))throw Error("baobab.Cursor.map: cannot map a non-list type.");return r.map(function(i,o){return t.call(n>1?e:this,this.select(o),o,r)},this)}},{key:"_get",value:function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(!p["default"].path(t))throw(0,y.makeError)("Baobab.Cursor.getters: invalid path.",{path:t});return this.solvedPath?(0,y.getIn)(this.tree._data,this.solvedPath.concat(t)):{data:void 0,solvedPath:null,exists:!1}}},{key:"exists",value:function(t){return t=(0,y.coercePath)(t),arguments.length>1&&(t=(0,y.arrayFrom)(arguments)),this._get(t).exists}},{key:"get",value:function(t){t=(0,y.coercePath)(t),arguments.length>1&&(t=(0,y.arrayFrom)(arguments));var e=this._get(t),r=e.data,n=e.solvedPath;return this.tree.emit("get",{data:r,solvedPath:n,path:this.path.concat(t)}),r}},{key:"clone",value:function(){var t=this.get.apply(this,arguments);return(0,y.shallowClone)(t)}},{key:"deepClone",value:function(){var t=this.get.apply(this,arguments);return(0,y.deepClone)(t)}},{key:"serialize",value:function(t){if(t=(0,y.coercePath)(t),arguments.length>1&&(t=(0,y.arrayFrom)(arguments)),!p["default"].path(t))throw(0,y.makeError)("Baobab.Cursor.getters: invalid path.",{path:t});if(this.solvedPath){var e=this.solvedPath.concat(t),r=(0,y.deepClone)((0,y.getIn)(this.tree._data,e).data),n=(0,y.getIn)(this.tree._monkeys,e).data,i=function o(t,e){if(p["default"].object(e)&&p["default"].object(t))for(var r in e)e[r]instanceof f.Monkey?delete t[r]:o(t[r],e[r])};return i(r,n),r}}},{key:"project",value:function(t){if(p["default"].object(t)){var e={};for(var r in t)e[r]=this.get(t[r]);return e}if(p["default"].array(t)){for(var e=[],n=0,i=t.length;i>n;n++)e.push(this.get(t[n]));return e}throw(0,y.makeError)("Baobab.Cursor.project: wrong projection.",{projection:t})}},{key:"startRecording",value:function(t){if(t=t||1/0,1>t)throw(0,y.makeError)("Baobab.Cursor.startRecording: invalid max records.",{value:t});return this.state.recording=!0,this.archive?this:(this._lazyBind(),this.archive=new y.Archive(t),this)}},{key:"stopRecording",value:function(){return this.state.recording=!1,this}},{key:"undo",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!this.state.recording)throw new Error("Baobab.Cursor.undo: cursor is not recording.");var e=this.archive.back(t);if(!e)throw Error("Baobab.Cursor.undo: cannot find a relevant record.");return this.state.undoing=!0,this.set(e),this}},{key:"hasHistory",value:function(){return!(!this.archive||!this.archive.get().length)}},{key:"getHistory",value:function(){return this.archive?this.archive.get():[]}},{key:"clearHistory",value:function(){return this.archive&&this.archive.clear(),this}},{key:"release",value:function(){this._dynamicPath&&this.tree.off("write",this._writeHandler),this.tree.off("update",this._updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill(),this.state.killed=!0}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),e}(l["default"]);r["default"]=v,"function"==typeof Symbol&&"undefined"!=typeof Symbol.iterator&&(v.prototype[Symbol.iterator]=function(){var t=this._get().data;if(!p["default"].array(t))throw Error("baobab.Cursor.@@iterate: cannot iterate a non-list type.");var e=0,r=this,n=t.length;return{next:function(){return n>e?{value:r.select(e++)}:{done:!0}}}});var g={unset:!0,pop:!0,shift:!0};s("set"),s("unset"),s("apply",p["default"]["function"]),s("push"),s("concat",p["default"].array),s("unshift"),s("pop"),s("shift"),s("splice",p["default"].splicer),s("merge",p["default"].object),s("deepMerge",p["default"].object),e.exports=r["default"]},{"./helpers":3,"./monkey":4,"./type":5,emmett:8}],3:[function(t,e,r){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=void 0,n=void 0;for(r=0,n=t.length;n>r;r++)if(e(t[r]))return r;return-1}function a(t){var e=new Array(t.length),r=void 0,n=void 0;for(r=0,n=t.length;n>r;r++)e[r]=t[r];return e}function s(t){return a(t)}function u(t,e){return function(){t.apply(null,arguments),e.apply(null,arguments)}}function h(t){var e=t.source,r="";return t.global&&(r+="g"),t.multiline&&(r+="m"),t.ignoreCase&&(r+="i"),t.sticky&&(r+="y"),t.unicode&&(r+="u"),new RegExp(e,r)}function c(t,r){if(!r||"object"!=typeof r||r instanceof Error||r instanceof w.MonkeyDefinition||"ArrayBuffer"in e&&r instanceof ArrayBuffer)return r;if(j["default"].array(r)){if(t){var n=[],i=void 0,o=void 0;for(i=0,o=r.length;o>i;i++)n.push(c(!0,r[i]));return n}return a(r)}if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp)return h(r);if(j["default"].object(r)){var s={},u=void 0;for(u in r)j["default"].lazyGetter(r,u)?Object.defineProperty(s,u,{get:Object.getOwnPropertyDescriptor(r,u).get,enumerable:!0,configurable:!0}):r.hasOwnProperty(u)&&(s[u]=t?c(!0,r[u]):r[u]);return s}return r}function l(t){return t||0===t||""===t?t:[]}function f(t,e){var r=!0,n=void 0;if(!t)return!1;for(n in e)if(j["default"].object(e[n]))r=r&&f(t[n],e[n]);else if(j["default"].array(e[n]))r=r&&!!~e[n].indexOf(t[n]);else if(t[n]!==e[n])return!1;return r}function d(t,e){if(!("object"!=typeof e||null===e||e instanceof w.Monkey)&&(Object.freeze(e),t))if(Array.isArray(e)){var r=void 0,n=void 0;for(r=0,n=e.length;n>r;r++)d(!0,e[r])}else{var i=void 0,o=void 0;for(o in e)j["default"].lazyGetter(e,o)||(i=e[o],i&&e.hasOwnProperty(o)&&"object"==typeof i&&!Object.isFrozen(i)&&d(!0,i))}}function p(t,e){if(!e)return D;var r=[],n=!0,i=t,a=void 0,s=void 0,u=void 0;for(s=0,u=e.length;u>s;s++){if(!i)return{data:void 0,solvedPath:e,exists:!1};if("function"==typeof e[s]){if(!j["default"].array(i))return D;if(a=o(i,e[s]),!~a)return D;r.push(a),i=i[a]}else if("object"==typeof e[s]){if(!j["default"].array(i))return D;if(a=o(i,function(t){return f(t,e[s])}),!~a)return D;r.push(a),i=i[a]}else r.push(e[s]),n="object"==typeof i&&e[s]in i,i=i[e[s]]}return{data:i,solvedPath:r,exists:n}}function y(t,e){var r=new Error(t);for(var n in e)r[n]=e[n];return r}function v(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];var i=r[0],o=void 0,a=void 0,s=void 0,u=void 0;for(a=1,s=r.length;s>a;a++){o=r[a];for(u in o)!t||!j["default"].object(o[u])||o[u]instanceof w.Monkey?i[u]=o[u]:i[u]=v(!0,i[u]||{},o[u])}return i}function g(t,e){for(var r=[],n=0,i=e.length;i>n;n++){var o=e[n];"."===o?n||(r=t.slice(0)):".."===o?r=(n?r:t).slice(0,-1):r.push(o)}return r}function m(t,e){var r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,h=void 0,c=void 0;for(r=0,o=t.length;o>r;r++){if(u=t[r],!u.length)return!0;for(n=0,a=e.length;a>n;n++){if(h=e[n],!h||!h.length)return!0;for(i=0,s=h.length;s>i&&(c=h[i],c==u[i]);i++)if(i+1===s||i+1===u.length)return!0}}return!1}function b(t,e,r){r=Math.max(0,r);for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;n>o;o++)i[o-3]=arguments[o];return e>=0?t.slice(0,e).concat(i).concat(t.slice(e+r)):t.slice(0,t.length+e).concat(i).concat(t.slice(t.length+e+r))}Object.defineProperty(r,"__esModule",{value:!0});var _=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r.arrayFrom=s,r.before=u,r.coercePath=l,r.getIn=p,r.makeError=y,r.solveRelativePath=g,r.solveUpdate=m,r.splice=b;var w=t("./monkey"),k=t("./type"),j=n(k),P=Function.prototype,x=function(){function t(e){i(this,t),this.size=e,this.records=[]}return _(t,[{key:"get",value:function(){return this.records}},{key:"add",value:function(t){return this.records.unshift(t),this.records.length>this.size&&(this.records.length=this.size),this}},{key:"clear",value:function(){return this.records=[],this}},{key:"back",value:function(t){var e=this.records[t-1];return e&&(this.records=this.records.slice(t)),e}}]),t}();r.Archive=x;var O=c.bind(null,!1),E=c.bind(null,!0);r.shallowClone=O,r.deepClone=E;var C="function"==typeof Object.freeze,A=C?d.bind(null,!1):P,M=C?d.bind(null,!0):P;r.freeze=A,r.deepFreeze=M;var D={data:void 0,solvedPath:null,exists:!1},S=v.bind(null,!1),I=v.bind(null,!0);r.shallowMerge=S,r.deepMerge=I;var B=function(){var t=0;return function(){return t++}}();r.uniqid=B}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./monkey":4,"./type":5}],4:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./type"),s=n(a),u=t("./update"),h=n(u),c=t("./helpers"),l=function d(t){var e=this;i(this,d);var r=s["default"].monkeyDefinition(t);if(!r)throw(0,c.makeError)("Baobab.monkey: invalid definition.",{definition:t});if(this.type=r,"object"===this.type)this.getter=t.get,this.projection=t.cursors||{},this.paths=Object.keys(this.projection).map(function(t){return e.projection[t]}),this.options=t.options||{};else{var n=1,o={};s["default"].object(t[t.length-1])&&(n++,o=t[t.length-1]),this.getter=t[t.length-n],this.projection=t.slice(0,-n),this.paths=this.projection,this.options=o}this.hasDynamicPaths=this.paths.some(s["default"].dynamicPath)};r.MonkeyDefinition=l;var f=function(){function t(e,r,n){var o=this;i(this,t),this.tree=e,this.path=r,this.definition=n,this.isRecursive=!1;var a=n.projection,s=c.solveRelativePath.bind(null,r.slice(0,-1));"object"===n.type?(this.projection=Object.keys(a).reduce(function(t,e){return t[e]=s(a[e]),t},{}),this.depPaths=Object.keys(this.projection).map(function(t){return o.projection[t]})):(this.projection=a.map(s),this.depPaths=this.projection),this.state={killed:!1},this.listener=function(t){var e=t.data.path;if(!o.state.killed){var r=(0,c.solveUpdate)([e],o.relatedPaths());r&&o.update()}},this.tree.on("write",this.listener),this.update()}return o(t,[{key:"checkRecursivity",value:function(){var t=this;return this.isRecursive=this.depPaths.some(function(e){return!!s["default"].monkeyPath(t.tree._monkeys,e)}),this.isRecursive&&(this.tree.off("write",this.listener),this.tree.on("write",this.listener)),this}},{key:"relatedPaths",value:function(){var t=this,e=void 0;return e=this.definition.hasDynamicPaths?this.depPaths.map(function(e){return(0,c.getIn)(t.tree._data,e).solvedPath}):this.depPaths,this.isRecursive?e.reduce(function(e,r){var n=s["default"].monkeyPath(t.tree._monkeys,r);if(!n)return e.concat([r]);var i=(0,c.getIn)(t.tree._monkeys,n).data;return e.concat(i.relatedPaths())},[]):e}},{key:"update",value:function(){var t=this.tree.project(this.projection),e=function(t,e,r){var n=null,i=!1;return function(){return i||(n=e.getter.apply(t,"object"===e.type?[r]:r),t.options.immutable&&e.options.immutable!==!1&&(0,c.deepFreeze)(n),i=!0),n}}(this.tree,this.definition,t);if(e.isLazyGetter=!0,this.tree.options.lazyMonkeys)this.tree._data=(0,h["default"])(this.tree._data,this.path,{type:"monkey",value:e},this.tree.options).data;else{var r=(0,h["default"])(this.tree._data,this.path,{type:"set",value:e(),options:{mutableLeaf:!this.definition.options.immutable}},this.tree.options);"data"in r&&(this.tree._data=r.data)}return this}},{key:"release",value:function(){this.tree.off("write",this.listener),this.state.killed=!0,delete this.projection,delete this.depPaths,delete this.tree}}]),t}();r.Monkey=f},{"./helpers":3,"./type":5,"./update":6}],5:[function(t,e,r){"use strict";function n(t,e){return e.some(function(e){return o[e](t)})}Object.defineProperty(r,"__esModule",{value:!0});var i=t("./monkey"),o={};o.array=function(t){return Array.isArray(t)},o.object=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Date)&&!(t instanceof RegExp)&&!("function"==typeof Map&&t instanceof Map)&&!("function"==typeof Set&&t instanceof Set)},o.string=function(t){return"string"==typeof t},o.number=function(t){return"number"==typeof t},o["function"]=function(t){return"function"==typeof t},o.primitive=function(t){return t!==Object(t)},o.splicer=function(t){return!o.array(t)||t.length<2?!1:n(t[0],["number","function","object"])&&o.number(t[1])};var a=["string","number","function","object"];o.path=function(t){return t||0===t||""===t?[].concat(t).every(function(t){return n(t,a)}):!1},o.dynamicPath=function(t){return t.some(function(t){return o["function"](t)||o.object(t)})},o.monkeyPath=function(t,e){var r=[],n=t,o=void 0,a=void 0;for(o=0,a=e.length;a>o;o++){if(r.push(e[o]),"object"!=typeof n)return null;if(n=n[e[o]],n instanceof i.Monkey)return r}return null},o.lazyGetter=function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return r&&r.get&&r.get.isLazyGetter===!0},o.monkeyDefinition=function(t){if(o.object(t))return o["function"](t.get)&&(!t.cursors||o.object(t.cursors)&&Object.keys(t.cursors).every(function(e){return o.path(t.cursors[e])}))?"object":null;if(o.array(t)){var e=1;return o.object(t[t.length-1])&&e++,o["function"](t[t.length-e])&&t.slice(0,-e).every(function(t){return o.path(t)})?"array":null}return null},o.watcherMapping=function(t){return o.object(t)&&Object.keys(t).every(function(e){return o.path(t[e])})};var s=["set","apply","push","unshift","concat","pop","shift","deepMerge","merge","splice","unset"];o.operationType=function(t){return"string"==typeof t&&!!~s.indexOf(t)},r["default"]=o,e.exports=r["default"]},{"./monkey":4}],6:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e,r){return(0,h.makeError)('Baobab.update: cannot apply the "'+t+'" on '+("a non "+e+" (path: /"+r.join("/")+")."),{path:r})}function a(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=r.type,s=r.value,c=r.options,l=void 0===c?{}:c,f={root:t},d=["root"].concat(i(e)),p=[],y=f,v=void 0,g=void 0,m=void 0;for(v=0,g=d.length;g>v;v++){if(m=d[v],v>0&&p.push(m),v===g-1){if("set"===a){if(n.pure&&y[m]===s)return{node:y[m]};u["default"].lazyGetter(y,m)?Object.defineProperty(y,m,{value:s,enumerable:!0,configurable:!0}):n.persistent&&!l.mutableLeaf?y[m]=(0,h.shallowClone)(s):y[m]=s}else if("monkey"===a)Object.defineProperty(y,m,{get:s,enumerable:!0,configurable:!0});else if("apply"===a){var b=s(y[m]);if(n.pure&&y[m]===b)return{node:y[m]};u["default"].lazyGetter(y,m)?Object.defineProperty(y,m,{value:b,enumerable:!0,configurable:!0}):n.persistent?y[m]=(0,h.shallowClone)(b):y[m]=b}else if("push"===a){if(!u["default"].array(y[m]))throw o("push","array",p);n.persistent?y[m]=y[m].concat([s]):y[m].push(s)}else if("unshift"===a){if(!u["default"].array(y[m]))throw o("unshift","array",p);n.persistent?y[m]=[s].concat(y[m]):y[m].unshift(s)}else if("concat"===a){if(!u["default"].array(y[m]))throw o("concat","array",p);n.persistent?y[m]=y[m].concat(s):y[m].push.apply(y[m],s)}else if("splice"===a){if(!u["default"].array(y[m]))throw o("splice","array",p);n.persistent?y[m]=h.splice.apply(null,[y[m]].concat(s)):y[m].splice.apply(y[m],s)}else if("pop"===a){if(!u["default"].array(y[m]))throw o("pop","array",p);n.persistent?y[m]=(0,h.splice)(y[m],-1,1):y[m].pop()}else if("shift"===a){if(!u["default"].array(y[m]))throw o("shift","array",p);n.persistent?y[m]=(0,h.splice)(y[m],0,1):y[m].shift()}else if("unset"===a)u["default"].object(y)?delete y[m]:u["default"].array(y)&&y.splice(m,1);else if("merge"===a){if(!u["default"].object(y[m]))throw o("merge","object",p);n.persistent?y[m]=(0,h.shallowMerge)({},y[m],s):y[m]=(0,h.shallowMerge)(y[m],s)}else if("deepMerge"===a){if(!u["default"].object(y[m]))throw o("deepMerge","object",p);n.persistent?y[m]=(0,h.deepMerge)({},y[m],s):y[m]=(0,h.deepMerge)(y[m],s)}n.immutable&&!l.mutableLeaf&&(0,h.deepFreeze)(y);break}u["default"].primitive(y[m])?y[m]={}:n.persistent&&(y[m]=(0,h.shallowClone)(y[m])),n.immutable&&g>0&&(0,h.freeze)(y),y=y[m]}return u["default"].lazyGetter(y,m)?{data:f.root}:{data:f.root,node:y[m]}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var s=t("./type"),u=n(s),h=t("./helpers");e.exports=r["default"]},{"./helpers":3,"./type":5}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var h=Object.getPrototypeOf(i);if(null===h)return;t=h,e=o,r=a,n=!0,s=h=void 0}},u=t("emmett"),h=n(u),c=t("./cursor"),l=n(c),f=t("./type"),d=n(f),p=t("./helpers"),y=function(t){function e(t,r){var n=this;i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.tree=t,this.mapping=null,this.state={killed:!1},this.refresh(r),this.handler=function(t){if(!n.state.killed){var e=n.getWatchedPaths();return(0,p.solveUpdate)(t.data.paths,e)?n.emit("update"):void 0}},this.tree.on("update",this.handler)}return o(e,t),a(e,[{key:"getWatchedPaths",value:function(){var t=this,e=Object.keys(this.mapping).map(function(e){var r=t.mapping[e];return r instanceof l["default"]?r.solvedPath:t.mapping[e]});return e.reduce(function(e,r){if(r=[].concat(r),d["default"].dynamicPath(r)&&(r=(0,p.getIn)(t.tree._data,r).solvedPath),!r)return e;var n=d["default"].monkeyPath(t.tree._monkeys,r);return n?e.concat((0,p.getIn)(t.tree._monkeys,n).data.relatedPaths()):e.concat([r])},[])}},{key:"getCursors",value:function(){var t=this,e={};return Object.keys(this.mapping).forEach(function(r){var n=t.mapping[r];n instanceof l["default"]?e[r]=n:e[r]=t.tree.select(n)}),e}},{key:"refresh",value:function(t){if(!d["default"].watcherMapping(t))throw(0,p.makeError)("Baobab.watch: invalid mapping.",{mapping:t});this.mapping=t;var e={};for(var r in t)e[r]=t[r]instanceof l["default"]?t[r].path:t[r];
this.get=this.tree.project.bind(this.tree,e)}},{key:"release",value:function(){this.tree.off("update",this.handler),this.state.killed=!0,this.kill()}}]),e}(h["default"]);r["default"]=y,e.exports=r["default"]},{"./cursor":2,"./helpers":3,"./type":5,emmett:8}],8:[function(t,e,r){(function(){"use strict";function t(t,e){var r,n={};for(r in t)n[r]=t[r];for(r in e)n[r]=e[r];return n}function n(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Function)&&!(t instanceof RegExp)}function i(t,e,r){var n,i,o,a;for(i in t)e.call(r||null,i,t[i]);if(Object.getOwnPropertySymbols)for(n=Object.getOwnPropertySymbols(t),o=0,a=n.length;a>o;o++)e.call(r||null,n[o],t[n[o]])}function o(t,e){t=t||[];var r,n,i=[];for(n=0,r=t.length;r>n;n++)t[n].fn!==e&&i.push(t[n]);return i}var a={once:"boolean",scope:"object"},s=0,u=function(){this._enabled=!0,this.unbindAll()};u.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},u.prototype.on=function(t,e,r){var o,u,h,c,l,f,d;if(n(t))return i(t,function(t,r){this.on(t,r,e)},this),this;for("function"==typeof t&&(r=e,e=t,t=null),l=[].concat(t),o=0,u=l.length;u>o;o++){if(c=l[o],d={order:s++,fn:e},"string"==typeof c||"symbol"==typeof c)this._handlers[c]||(this._handlers[c]=[]),f=this._handlers[c],d.type=c;else if(c instanceof RegExp)f=this._handlersComplex,d.pattern=c;else{if(null!==c)throw Error("Emitter.on: invalid event.");f=this._handlersAll}for(h in r||{})a[h]&&(d[h]=r[h]);f.push(d)}return this},u.prototype.once=function(){var e=Array.prototype.slice.call(arguments),r=e.length-1;return n(e[r])&&e.length>1?e[r]=t(e[r],{once:!0}):e.push({once:!0}),this.on.apply(this,e)},u.prototype.off=function(t,e){var r,a,s,u;if(1===arguments.length&&"function"==typeof t){e=arguments[0];for(s in this._handlers)this._handlers[s]=o(this._handlers[s],e),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=o(this._handlersAll,e),this._handlersComplex=o(this._handlersComplex,e)}else if(1!==arguments.length||"string"!=typeof t&&"symbol"!=typeof t)if(2===arguments.length){var h=[].concat(t);for(r=0,a=h.length;a>r;r++)u=h[r],this._handlers[u]=o(this._handlers[u],e),0===(this._handlers[u]||[]).length&&delete this._handlers[u]}else n(t)&&i(t,this.off,this);else delete this._handlers[t];return this},u.prototype.listeners=function(t){var e,r,n,i=this._handlersAll||[],o=!1;if(!t)throw Error("Emitter.listeners: no event provided.");for(i=i.concat(this._handlers[t]||[]),r=0,n=this._handlersComplex.length;n>r;r++)e=this._handlersComplex[r],~t.search(e.pattern)&&(o=!0,i.push(e));return this._handlersAll.length||o?i.sort(function(t,e){return t.order-e.order}):i.slice(0)},u.prototype.emit=function(t,e){if(!this._enabled)return this;if(n(t))return i(t,this.emit,this),this;var r,o,a,s,u,h,c,l,f=[].concat(t),d=[];for(u=0,c=f.length;c>u;u++){for(a=this.listeners(f[u]),h=0,l=a.length;l>h;h++)s=a[h],r={type:f[u],target:this},arguments.length>1&&(r.data=e),s.fn.call("scope"in s?s.scope:this,r),s.once&&d.push(s);for(h=d.length-1;h>=0;h--)o=d[h].type?this._handlers[d[h].type]:d[h].pattern?this._handlersComplex:this._handlersAll,o.splice(o.indexOf(d[h]),1)}return this},u.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1,this.unbindAll=this.on=this.once=this.off=this.emit=this.listeners=Function.prototype},u.prototype.disable=function(){return this._enabled=!1,this},u.prototype.enable=function(){return this._enabled=!0,this},u.version="3.1.1","undefined"!=typeof r?("undefined"!=typeof e&&e.exports&&(r=e.exports=u),r.Emitter=u):"function"==typeof define&&define.amd?define("emmett",[],function(){return u}):this.Emitter=u}).call(this)},{}],9:[function(t,e,r){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],10:[function(t,e,r){e.exports=t("./lib/Dispatcher")},{"./lib/Dispatcher":12}],11:[function(t,e,r){"use strict";function n(t,e){this.name=t,this.payload=e,this._handlers=null,this._isExecuting=!1,this._isCompleted=null}var i=t("debug")("Dispatchr:Action");n.prototype.getStoreName=function(t){return"string"==typeof t?t:t.storeName},n.prototype.execute=function(t){if(this._isExecuting)throw new Error("Action is already dispatched");var e=this;this._handlers=t,this._isExecuting=!0,this._isCompleted={},Object.keys(t).forEach(function(t){e._callHandler(t)})},n.prototype._callHandler=function(t){var e=this,r=e._handlers[t];if(!r)throw new Error(t+" does not have a handler for action "+e.name);e._isCompleted[t]||(e._isCompleted[t]=!1,i("executing handler for "+t),r(e.payload,e.name),e._isCompleted[t]=!0)},n.prototype.waitFor=function(t,e){var r=this;if(!r._isExecuting)throw new Error("waitFor called even though there is no action being executed!");Array.isArray(t)||(t=[t]),i("waiting on "+t.join(", ")),t.forEach(function(t){t=r.getStoreName(t),r._handlers[t]&&r._callHandler(t)}),e()},e.exports=n},{debug:14}],12:[function(t,e,r){(function(r){"use strict";function n(t){t=t||{},t.stores=t.stores||[],this.stores={},this.handlers={},this.handlers[i]=[],this.hasWarnedAboutNameProperty=!1,t.stores.forEach(function(t){this.registerStore(t)},this)}var i=(t("./Action"),"default"),o=t("./DispatcherContext");n.prototype.createContext=function(t){return new o(this,t)},n.prototype.registerStore=function(t){if("function"!=typeof t)throw new Error("registerStore requires a constructor as first parameter");var e=this.getStoreName(t);if(!e)throw new Error("Store is required to have a `storeName` property.");if(this.stores[e]){if(this.stores[e]===t)return;throw new Error("Store with name `"+e+"` has already been registered.")}this.stores[e]=t,t.handlers&&Object.keys(t.handlers).forEach(function(r){var n=t.handlers[r];this._registerHandler(r,e,n)},this)},n.prototype.isRegistered=function(t){var e=this.getStoreName(t),r=this.stores[e];return r?"function"==typeof t&&t!==r?!1:!0:!1},n.prototype.getStoreName=function(t){return"string"==typeof t?t:t.storeName?t.storeName:("production"!==r.env.NODE_ENV&&t.name&&!this.hasWarnedAboutNameProperty&&(console.warn("A store has been registered that relies on the constructor's name property. This name may change when you minify your stores during build time and could break string references to your store. It is advised that you add a static `storeName` property to your store to ensure the store name does not change during your build."),this.hasWarnedAboutNameProperty=!0),t.name)},n.prototype._registerHandler=function(t,e,r){return this.handlers[t]=this.handlers[t]||[],this.handlers[t].push({name:this.getStoreName(e),handler:r}),this.handlers.length-1},e.exports={createDispatcher:function(t){return new n(t)}}}).call(this,t("_process"))},{"./Action":11,"./DispatcherContext":13,_process:9}],13:[function(t,e,r){"use strict";function n(t,e){this.dispatcher=t,this.storeInstances={},this.currentAction=null,this.dispatcherInterface={getContext:function(){return e},getStore:this.getStore.bind(this),waitFor:this.waitFor.bind(this)}}var i=t("./Action"),o="default",a=t("debug")("Dispatchr:DispatcherContext");n.prototype.getStore=function(t){var e=this.dispatcher.getStoreName(t);if(!this.storeInstances[e]){var r=this.dispatcher.stores[e];if(!r)throw new Error("Store "+e+" was not registered.");this.storeInstances[e]=new this.dispatcher.stores[e](this.dispatcherInterface)}return this.storeInstances[e]},n.prototype.dispatch=function(t,e){if(!t)throw new Error("actionName parameter `"+t+"` is invalid.");if(this.currentAction)throw new Error("Cannot call dispatch while another dispatch is executing. Attempted to execute '"+t+"' but '"+this.currentAction.name+"' is already executing.");var r=this.dispatcher.handlers[t]||[],n=this.dispatcher.handlers[o]||[];if(!r.length&&!n.length)return void a(t+" does not have any registered handlers");a("dispatching "+t,e),this.currentAction=new i(t,e);var s=this,u=r.concat(n),h={};try{u.forEach(function(t){if(!h[t.name]){var e=s.getStore(t.name);if("function"==typeof t.handler)h[t.name]=t.handler.bind(e);else{if(!e[t.handler])throw new Error(t.name+" does not have a method called "+t.handler);h[t.name]=e[t.handler].bind(e)}}}),this.currentAction.execute(h)}catch(c){throw c}finally{a("finished "+t),this.currentAction=null}},n.prototype.dehydrate=function(){var t=this,e={};return Object.keys(t.storeInstances).forEach(function(r){var n=t.storeInstances[r];!n.dehydrate||n.shouldDehydrate&&!n.shouldDehydrate()||(e[r]=n.dehydrate())}),{stores:e}},n.prototype.rehydrate=function(t){var e=this;t.stores&&Object.keys(t.stores).forEach(function(r){var n=t.stores[r],i=e.getStore(r);i.rehydrate&&i.rehydrate(n)})},n.prototype.waitFor=function(t,e){if(!this.currentAction)throw new Error("waitFor called even though there is no action dispatching");this.currentAction.waitFor(t,e)},e.exports=n},{"./Action":11,debug:14}],14:[function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+r.humanize(this.diff),!e)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,n),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?r.storage.removeItem("debug"):r.storage.debug=t}catch(e){}}function s(){var t;try{t=r.storage.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(t){}}r=e.exports=t("./debug"),r.log=o,r.formatArgs=i,r.save=a,r.load=s,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(t){return JSON.stringify(t)},r.enable(s())},{"./debug":15}],15:[function(t,e,r){function n(){return r.colors[c++%r.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(h||e);t.diff=o,t.prev=h,t.curr=e,h=e,null==t.useColors&&(t.useColors=r.useColors()),null==t.color&&t.useColors&&(t.color=n());var a=Array.prototype.slice.call(arguments);a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(e,n){if("%%"===e)return e;s++;var i=r.formatters[n];if("function"==typeof i){var o=a[s];e=i.call(t,o),a.splice(s,1),s--}return e}),"function"==typeof r.formatArgs&&(a=r.formatArgs.apply(t,a));var u=i.log||r.log||console.log.bind(console);u.apply(t,a)}e.enabled=!1,i.enabled=!0;var o=r.enabled(t)?i:e;return o.namespace=t,o}function o(t){r.save(t);for(var e=(t||"").split(/[\s,]+/),n=e.length,i=0;n>i;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))}function a(){r.enable("")}function s(t){var e,n;for(e=0,n=r.skips.length;n>e;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;n>e;e++)if(r.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}r=e.exports=i,r.coerce=u,r.disable=a,r.enable=o,r.enabled=s,r.humanize=t("ms"),r.names=[],r.skips=[],r.formatters={};var h,c=0},{ms:16}],16:[function(t,e,r){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function i(t){return t>=c?Math.round(t/c)+"d":t>=h?Math.round(t/h)+"h":t>=u?Math.round(t/u)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return a(t,c,"day")||a(t,h,"hour")||a(t,u,"minute")||a(t,s,"second")||t+" ms"}function a(t,e,r){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,u=60*s,h=60*u,c=24*h,l=365.25*c;e.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?o(t):i(t)}},{}],17:[function(t,e,r){(function(r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2],n=arguments[3],i=function(e){if(this.dispatcher=e,this.waitFor=function(t,e){if(t=Array.isArray(t)?t:[t],!n.areStoresRegistered(t))throw new Error("Waiting for stores that are not injected into Angular yet, "+t.join(", ")+". Be sure to inject stores before waiting for them");this.dispatcher.waitFor(t,e.bind(this))},!this.initialize)throw new Error("Store "+t+" does not have an initialize method which is is necessary to set the initial state");this.initialize()};return i.handlers=e.handlers,i.storeName=t,i.prototype.immutable=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.__tree?this.__tree.set(t):this.__tree=new a["default"](t,u.extend({},r,e)),this.__tree},i.prototype.monkey=a["default"].monkey,Object.keys(e).forEach(function(t){i.prototype[t]=e[t]}),i}var o=t("baobab"),a=n(o),s=t("dispatchr"),u=r.angular||t("angular")&&r.angular,h=u.module,c=[],l=!1,f=function(t){this.stores=[],this.dispatcherInstance=(0,s.createDispatcher)(),this.dispatcher=this.dispatcherInstance.createContext(),this.dispatch=function(){c.length&&console.warn("There are still stores not injected: "+c.join(",")+". Make sure to manually inject all stores before running any dispatches or set autoInjectStores to true."),this.dispatcher.dispatch.apply(this.dispatcher,arguments)},this.createStore=function(e,r){var n=i(e,r,t,this),o=void 0;if(n.exports={},this.dispatcherInstance.registerStore(n),this.stores.push(n),!r.exports)throw new Error("You have to add an exports object to your store: "+e);return o=this.dispatcher.getStore(n),Object.keys(r.exports).forEach(function(t){var e=Object.getOwnPropertyDescriptor(r.exports,t);e.get?Object.defineProperty(n.exports,t,{enumerable:e.enumerable,configurable:e.configurable,get:function(){return e.get.apply(o)}}):(n.exports[t]=function(){return r.exports[t].apply(o,arguments)},r.exports[t]=r.exports[t].bind(o))}),n.exports},this.getStore=function(t){var e=this.stores.filter(function(e){return e.exports===t})[0];return this.dispatcher.getStore(e)},this.areStoresRegistered=function(t){var e=this.stores.map(function(t){return t.storeName});return t.every(function(t){return e.indexOf(t)>-1})},this.reset=function(){this.dispatcherInstance.stores={},this.dispatcherInstance.handlers={},this.stores=[],c=[]},this.Baobab=a["default"]};u.module=function(){var t=h.apply(u,arguments);return t.store=function(t,e){return c.push(t),this.factory(t,["$injector","flux",function(r,n){var i=r.invoke(e);return c.splice(c.indexOf(t),1),n.createStore(t,i)}]),this},t},u.module("flux",[]).provider("flux",function(){var t={};this.setImmutableDefaults=function(e){t=e},this.autoInjectStores=function(t){l=t},this.$get=[function(){return new f(t)}]}).run(["$rootScope","$injector","flux",function(t,e,r){u.mock&&r.reset(),!u.mock&&l&&e.invoke(c.concat(u.noop)),t.constructor.prototype.$listenTo=function(t,e,n){var i=void 0,o=r.getStore(t);if(!o.__tree)throw new Error("Store "+t.storeName+" has not defined state with this.immutable() which is required in order to use $listenTo");n?i=o.__tree.select(e):(n=e,i=o.__tree),i.on("update",n),n({}),this.$on("$destroy",function(){return i.off("update",n)})}}]),e.exports="flux"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{angular:"angular",baobab:1,dispatchr:10}]},{},[17]);